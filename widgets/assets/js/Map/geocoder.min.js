if(+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b).on("keydown.bs.carousel",a.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.2.0",c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},c.prototype.keydown=function(a){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.to=function(b){var c=this,d=this.getItemIndex(this.$active=this.$element.find(".item.active"));return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=e[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:g});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(e)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one("bsTransitionEnd",function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(m)),f&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(b=!b),e||d.data("bs.collapse",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};c.VERSION="3.2.0",c.DEFAULTS={toggle:!0},c.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c=a.Event("show.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){var d=this.$parent&&this.$parent.find("> .panel > .in");if(d&&d.length){var e=d.data("bs.collapse");if(e&&e.transitioning)return;b.call(d,"hide"),e||d.data("bs.collapse",null)}var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0),this.transitioning=1;var g=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return g.call(this);var h=a.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",a.proxy(g,this)).emulateTransitionEnd(350)[f](this.$element[0][h])}}},c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=b,a.fn.collapse.Constructor=c,a.fn.collapse.noConflict=function(){return a.fn.collapse=d,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(c){var d,e=a(this),f=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),g=a(f),h=g.data("bs.collapse"),i=h?"toggle":e.data(),j=e.attr("data-parent"),k=j&&a(j);h&&h.transitioning||(k&&k.find('[data-toggle="collapse"][data-parent="'+j+'"]').not(e).addClass("collapsed"),e[g.hasClass("in")?"addClass":"removeClass"]("collapsed")),b.call(g,i)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault(),b.call(a(this),"show")})}(jQuery),!function(a){var b;if("function"==typeof define&&define.amd)define(["leaflet"],a);else if("undefined"!=typeof module)b=require("leaflet"),module.exports=a(b);else{if("undefined"==typeof window.L)throw"Leaflet must be loaded first";a(window.L)}}(function(a){"use strict";return a.Control.OpenCageSearch=a.Control.extend({options:{showResultIcons:!1,collapsed:!0,expand:"click",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",key:"",limit:5},_callbackId:0,initialize:function(b){a.Util.setOptions(this,b),this.options.geocoder||(this.options.geocoder=new a.Control.OpenCageSearch.Geocoder(this.options))},onAdd:function(b){var c,d="leaflet-control-ocd-search",e=a.DomUtil.create("div",d),f=a.DomUtil.create("div","leaflet-control-ocd-search-icon",e),g=this._form=a.DomUtil.create("form",d+"-form",e);return this._map=b,this._container=e,c=this._input=a.DomUtil.create("input"),c.type="text",a.DomEvent.addListener(c,"keydown",this._keydown,this),this._errorElement=document.createElement("div"),this._errorElement.className=d+"-form-no-error",this._errorElement.innerHTML=this.options.errorMessage,this._alts=a.DomUtil.create("ul",d+"-alternatives leaflet-control-ocd-search-alternatives-minimized"),g.appendChild(c),g.appendChild(this._errorElement),e.appendChild(this._alts),a.DomEvent.addListener(g,"submit",this._geocode,this),this.options.collapsed?"click"===this.options.expand?a.DomEvent.addListener(f,"click",function(a){0===a.button&&1===a.detail&&this._toggle()},this):(a.DomEvent.addListener(f,"mouseover",this._expand,this),a.DomEvent.addListener(f,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):this._expand(),a.DomEvent.disableClickPropagation(e),e},_geocodeResult:function(b){if(a.DomUtil.removeClass(this._container,"leaflet-control-ocd-search-spinner"),1===b.length)this._geocodeResultSelected(b[0]);else if(b.length>0){this._alts.innerHTML="",this._results=b,a.DomUtil.removeClass(this._alts,"leaflet-control-ocd-search-alternatives-minimized");for(var c=0;c<b.length;c++)this._alts.appendChild(this._createAlt(b[c],c))}else a.DomUtil.addClass(this._errorElement,"leaflet-control-ocd-search-error")},markGeocode:function(b){return this._map.fitBounds(b.bounds),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new a.Marker(b.center).bindPopup(b.name).addTo(this._map).openPopup(),this},_geocode:function(b){return a.DomEvent.preventDefault(b),a.DomUtil.addClass(this._container,"leaflet-control-ocd-search-spinner"),this._clearResults(),this.options.geocoder.geocode(this._input.value,this._geocodeResult,this),!1},_geocodeResultSelected:function(a){this.options.collapsed?this._collapse():this._clearResults(),this.markGeocode(a)},_toggle:function(){this._container.className.indexOf("leaflet-control-ocd-search-expanded")>=0?this._collapse():this._expand()},_expand:function(){a.DomUtil.addClass(this._container,"leaflet-control-ocd-search-expanded"),this._input.select()},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-ocd-search-expanded",""),a.DomUtil.addClass(this._alts,"leaflet-control-ocd-search-alternatives-minimized"),a.DomUtil.removeClass(this._errorElement,"leaflet-control-ocd-search-error")},_clearResults:function(){a.DomUtil.addClass(this._alts,"leaflet-control-ocd-search-alternatives-minimized"),this._selection=null,a.DomUtil.removeClass(this._errorElement,"leaflet-control-ocd-search-error")},_createAlt:function(b,c){var d=document.createElement("li");return d.innerHTML='<a href="#" data-result-index="'+c+'">'+(this.options.showResultIcons&&b.icon?'<img src="'+b.icon+'"/>':"")+b.name+"</a>",a.DomEvent.addListener(d,"click",function(){this._geocodeResultSelected(b)},this),d},_keydown:function(b){var c=this,d=function(b){c._selection&&(a.DomUtil.removeClass(c._selection.firstChild,"leaflet-control-ocd-search-selected"),c._selection=c._selection[b>0?"nextSibling":"previousSibling"]),c._selection||(c._selection=c._alts[b>0?"firstChild":"lastChild"]),c._selection&&a.DomUtil.addClass(c._selection.firstChild,"leaflet-control-ocd-search-selected")};switch(b.keyCode){case 38:d(-1),a.DomEvent.preventDefault(b);break;case 40:d(1),a.DomEvent.preventDefault(b);break;case 13:if(this._selection){var e=parseInt(this._selection.firstChild.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[e]),this._clearResults(),a.DomEvent.preventDefault(b)}}return!0}}),a.Control.openCageSearch=function(b,c){return new a.Control.OpenCageSearch(b,c)},a.Control.OpenCageSearch.callbackId=0,a.Control.OpenCageSearch.jsonp=function(b,c,d,e,f){var g="_ocd_geocoder_"+a.Control.OpenCageSearch.callbackId++;c[f||"callback"]=g,window[g]=a.Util.bind(d,e);var h=document.createElement("script");h.type="text/javascript",h.src=b+a.Util.getParamString(c),h.id=g,document.getElementsByTagName("head")[0].appendChild(h)},a.Control.OpenCageSearch.Geocoder=a.Class.extend({options:{serviceUrl:"https://api.opencagedata.com/geocode/v1/",geocodingQueryParams:{},reverseQueryParams:{},key:"",limit:5},initialize:function(b){a.Util.setOptions(this,b)},geocode:function(b,c,d){a.Control.OpenCageSearch.jsonp(this.options.serviceUrl+"json/",a.extend({q:b,limit:this.options.limit,key:this.options.key},this.options.geocodingQueryParams),function(b){for(var e=[],f=b.results.length-1;f>=0;f--)e[f]={name:b.results[f].formatted,bounds:a.latLngBounds([b.results[f].bounds.southwest.lat,b.results[f].bounds.southwest.lng],[b.results[f].bounds.northeast.lat,b.results[f].bounds.northeast.lng]),center:a.latLng(b.results[f].geometry.lat,b.results[f].geometry.lng)};c.call(d,e)},this,"jsonp")},reverse:function(a,b,c,d){this.geocode(a,c,d)}}),a.Control.OpenCageSearch.geocoder=function(b){return new a.Control.OpenCageSearch.Geocoder(b)},a.Control.OpenCageSearch}),$(document).ready(function(){var a=$("form#contact-form");a.find("a.btn").click(function(b){b.preventDefault(),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serialize(),dataType:"text",success:function(){$("div.contact-success").show()},error:function(){$("div.contact-error").show()}})})}),!org)var org={};org.polymaps||(org.polymaps={}),function(a){function c(b){var c=b.indexOf(":");return 0>c?b:{space:a.ns[b.substring(0,c)],local:b.substring(c+1)}}function d(){for(var a=0;a<d.maps.length;a++)d.maps[a].resize()}function e(a){return 360/Math.PI*Math.atan(Math.exp(a*Math.PI/180))-90}function f(a){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360))}function g(a,b){if(a.row>b.row){var c=a;a=b,b=c}return{x0:a.column,y0:a.row,x1:b.column,y1:b.row,dx:b.column-a.column,dy:b.row-a.row}}function h(a,b,c,d,e){var f=Math.max(c,Math.floor(b.y0)),g=Math.min(d,Math.ceil(b.y1));if(a.x0==b.x0&&a.y0==b.y0?a.x0+b.dy/a.dy*a.dx<b.x1:a.x1-b.dy/a.dy*a.dx<b.x0){var h=a;a=b,b=h}for(var i=a.dx/a.dy,j=b.dx/b.dy,k=a.dx>0,l=b.dx<0,m=f;g>m;m++){var n=i*Math.max(0,Math.min(a.dy,m+k-a.y0))+a.x0,o=j*Math.max(0,Math.min(b.dy,m+l-b.y0))+b.x0;e(Math.floor(o),Math.ceil(n),m)}}function i(a,b,c,d,e,f){var i=g(a,b),j=g(b,c),k=g(c,a);if(i.dy>j.dy){var l=i;i=j,j=l}if(i.dy>k.dy){var l=i;i=k,k=l}if(j.dy>k.dy){var l=j;j=k,k=l}i.dy&&h(k,i,d,e,f),j.dy&&h(k,j,d,e,f)}a.version="2.5.1";var j={x:0,y:0};a.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},a.id=function(){var a=0;return function(){return++a}}(),a.svg=function(b){return document.createElementNS(a.ns.svg,b)},a.transform=function(a,b,c,d,e,f){var g,h,i,j={};return arguments.length||(a=1,c=0,e=0,b=0,d=1,f=0),j.zoomFraction=function(e){return arguments.length?(h=e,g=Math.floor(h+Math.log(Math.sqrt(a*a+b*b+c*c+d*d))/Math.LN2),i=Math.pow(2,-g),j):h},j.apply=function(h){var i=Math.pow(2,-h.zoom),j=Math.pow(2,h.zoom-g);return{column:(a*h.column*i+c*h.row*i+e)*j,row:(b*h.column*i+d*h.row*i+f)*j,zoom:h.zoom-g}},j.unapply=function(h){var i=Math.pow(2,-h.zoom),j=Math.pow(2,h.zoom+g);return{column:(h.column*i*d-h.row*i*c-e*d+f*c)/(a*d-b*c)*j,row:(h.column*i*b-h.row*i*a-e*b+f*a)/(c*b-d*a)*j,zoom:h.zoom+g}},j.toString=function(){return"matrix("+[a*i,b*i,c*i,d*i].join(" ")+" 0 0)"},j.zoomFraction(0)},a.cache=function(a,b){function c(a){k--,b&&b(a),delete g[a.key],a.next?a.next.prev=a.prev:(i=a.prev)&&(i.next=null),a.prev?a.prev.next=a.next:(h=a.next)&&(h.prev=null)}function d(){for(var a=i;k>j&&a;a=a.prev)a.lock||c(a)}var e={},f={},g={},h=null,i=null,j=64,k=0;return e.peek=function(a){return g[[a.zoom,a.column,a.row].join("/")]},e.load=function(b,c){var d=[b.zoom,b.column,b.row].join("/"),e=g[d];return e?(e.prev&&(e.prev.next=e.next,e.next?e.next.prev=e.prev:i=e.prev,e.prev=null,e.next=h,h.prev=e,h=e),e.lock=1,f[d]=e,e):(e={key:d,column:b.column,row:b.row,zoom:b.zoom,next:h,prev:null,lock:1},a.call(null,e,c),f[d]=g[d]=e,h?h.prev=e:i=e,h=e,k++,e)},e.unload=function(a){if(!(a in f))return!1;var b=f[a];return b.lock=0,delete f[a],b.request&&b.request.abort(!1)&&c(b),b},e.locks=function(){return f},e.size=function(a){return arguments.length?(j=a,d(),e):j},e.flush=function(){return d(),e},e.clear=function(){for(var a in g){var c=g[a];c.request&&c.request.abort(!1),b&&b(g[a]),c.lock&&(c.lock=0,c.element.parentNode.removeChild(c.element))}return f={},g={},h=i=null,k=0,e},e},a.url=function(b){function c(c){var f=c.zoom<0?1:1<<c.zoom,g=c.column;if(e)g=c.column%f,0>g&&(g+=f);else if(0>g||g>=f)return null;return b.replace(/{(.)}/g,function(b,e){switch(e){case"S":return d[(Math.abs(c.zoom)+c.row+g)%d.length];case"Z":return c.zoom;case"X":return g;case"Y":return c.row;case"B":var f=a.map.coordinateLocation({row:c.row,column:g,zoom:c.zoom}),h=a.map.coordinateLocation({row:c.row+1,column:g+1,zoom:c.zoom}),i=Math.ceil(Math.log(c.zoom)/Math.LN2);return h.lat.toFixed(i)+","+f.lon.toFixed(i)+","+f.lat.toFixed(i)+","+h.lon.toFixed(i)}return e})}var d=[],e=!0;return c.template=function(a){return arguments.length?(b=a,c):b},c.hosts=function(a){return arguments.length?(d=a,c):d},c.repeat=function(a){return arguments.length?(e=a,c):e},c},a.dispatch=function(a){var b={};return a.on=function(c,d){for(var e=b[c]||(b[c]=[]),f=0;f<e.length;f++)if(e[f].handler==d)return a;return e.push({handler:d,on:!0}),a},a.off=function(c,d){var e=b[c];if(e)for(var f=0;f<e.length;f++){var g=e[f];if(g.handler==d){g.on=!1,e.splice(f,1);break}}return a},function(c){var d=b[c.type];if(d){d=d.slice();for(var e=0;e<d.length;e++){var f=d[e];f.on&&f.handler.call(a,c)}}}},a.queue=function(){function b(){j>=k||!i.length||(j++,i.pop()())}function c(a){for(var b=0;b<i.length;b++)if(i[b]==a)return i.splice(b,1),!0;return!1}function d(a,d,e){function f(){h=new XMLHttpRequest,e&&h.overrideMimeType&&h.overrideMimeType(e),h.open("GET",a,!0),h.onreadystatechange=function(){4==h.readyState&&(j--,h.status<300&&d(h),b())},h.send(null)}function g(a){return c(f)?!0:a&&h?(h.abort(),!0):!1}var h;return i.push(f),b(),{abort:g}}function e(a,b,c){return d(a,function(a){a.responseText&&b(a.responseText)},c)}function f(a,b){return d(a,function(a){a.responseText&&b(JSON.parse(a.responseText))},"application/json")}function g(a,b){return d(a,function(a){a.responseXML&&b(a.responseXML)},"application/xml")}function h(d,e,f){function g(){k=document.createElement("img"),k.onerror=function(){j--,b()},k.onload=function(){j--,f(k),b()},k.src=e,d.setAttributeNS(a.ns.xlink,"href",e)}function h(a){return c(g)?!0:a&&k?(k.src="about:",!0):!1}var k;return i.push(g),b(),{abort:h}}var i=[],j=0,k=6;return{text:e,xml:g,json:f,image:h}}(),a.map=function(){function c(){t&&(q<t[0]?q=t[0]:q>t[1]&&(q=t[1])),r=q-(q=Math.round(q)),s=Math.pow(2,r)}function g(){if(B){var a=45/Math.pow(2,q+r-3),b=Math.max(Math.abs(w*n.x+v*n.y),Math.abs(y*n.x+x*n.y)),c=e(z-b*a/o.y),d=e(A+b*a/o.y);p.lat=Math.max(c,Math.min(d,p.lat));var f=Math.max(Math.abs(w*n.y+v*n.x),Math.abs(y*n.y+x*n.x)),g=B[0].lon-f*a/o.x,h=B[1].lon+f*a/o.x;p.lon=Math.max(g,Math.min(h,p.lon))}}var h,i,l={},m=j,n=j,o={x:256,y:256},p={lat:37.76487,lon:-122.41948},q=12,r=0,s=1,t=[1,18],u=0,v=1,w=0,x=1,y=0,z=-180,A=180,B=[{lat:e(z),lon:-1/0},{lat:e(A),lon:1/0}];l.locationCoordinate=function(b){var c=a.map.locationCoordinate(b),d=Math.pow(2,q);return c.column*=d,c.row*=d,c.zoom+=q,c},l.coordinateLocation=a.map.coordinateLocation,l.coordinatePoint=function(a,b){var c=Math.pow(2,q-b.zoom),d=Math.pow(2,q-a.zoom),e=(b.column*c-a.column*d)*o.x*s,f=(b.row*c-a.row*d)*o.y*s;return{x:n.x+v*e-w*f,y:n.y+w*e+v*f}},l.pointCoordinate=function(a,b){var c=Math.pow(2,q-a.zoom),d=(b.x-n.x)/s,e=(b.y-n.y)/s;return{column:a.column*c+(x*d-y*e)/o.x,row:a.row*c+(y*d+x*e)/o.y,zoom:q}},l.locationPoint=function(a){var b=Math.pow(2,q+r-3)/45,c=(a.lon-p.lon)*b*o.x,d=(f(p.lat)-f(a.lat))*b*o.y;return{x:n.x+v*c-w*d,y:n.y+w*c+v*d}},l.pointLocation=function(a){var b=45/Math.pow(2,q+r-3),c=(a.x-n.x)*b,d=(a.y-n.y)*b;return{lon:p.lon+(x*c-y*d)/o.x,lat:e(f(p.lat)-(y*c+x*d)/o.y)}};var C=a.svg("rect");return C.setAttribute("visibility","hidden"),C.setAttribute("pointer-events","all"),l.container=function(a){return arguments.length?(h=a,h.setAttribute("class","map"),h.appendChild(C),l.resize()):h},l.focusableParent=function(){for(var a=h;a;a=a.parentNode)if(a.tabIndex>=0)return a;return window},l.mouse=function(b){var c=(h.ownerSVGElement||h).createSVGPoint();if(0>k&&(window.scrollX||window.scrollY)){var d=document.body.appendChild(a.svg("svg"));d.style.position="absolute",d.style.top=d.style.left="0px";var e=d.getScreenCTM();k=!(e.f||e.e),document.body.removeChild(d)}return k?(c.x=b.pageX,c.y=b.pageY):(c.x=b.clientX,c.y=b.clientY),c.matrixTransform(h.getScreenCTM().inverse())},l.size=function(a){return arguments.length?(i=a,l.resize()):m},l.resize=function(){return i?(m=i,d.remove(l)):(C.setAttribute("width","100%"),C.setAttribute("height","100%"),b=C.getBBox(),m={x:b.width,y:b.height},d.add(l)),C.setAttribute("width",m.x),C.setAttribute("height",m.y),n={x:m.x/2,y:m.y/2},g(),l.dispatch({type:"resize"}),l},l.tileSize=function(a){return arguments.length?(o=a,l.dispatch({type:"move"}),l):o},l.center=function(a){return arguments.length?(p=a,g(),l.dispatch({type:"move"}),l):p},l.panBy=function(a){var b=45/Math.pow(2,q+r-3),c=a.x*b,d=a.y*b;return l.center({lon:p.lon+(y*d-x*c)/o.x,lat:e(f(p.lat)+(y*c+x*d)/o.y)})},l.centerRange=function(a){return arguments.length?(B=a,B?(z=B[0].lat>-90?f(B[0].lat):-1/0,A=B[0].lat<90?f(B[1].lat):1/0):(z=-1/0,A=1/0),g(),l.dispatch({type:"move"}),l):B},l.zoom=function(a){return arguments.length?(q=a,c(),l.center(p)):q+r},l.zoomBy=function(a,b,d){if(arguments.length<2)return l.zoom(q+r+a);arguments.length<3&&(d=l.pointLocation(b)),q=q+r+a,c();var e=l.locationPoint(d);return l.panBy({x:b.x-e.x,y:b.y-e.y})},l.zoomRange=function(a){return arguments.length?(t=a,l.zoom(q+r)):t},l.extent=function(a){if(!arguments.length)return[l.pointLocation({x:0,y:m.y}),l.pointLocation({x:m.x,y:0})];var b=l.locationPoint(a[0]),d=l.locationPoint(a[1]),e=Math.max((d.x-b.x)/m.x,(b.y-d.y)/m.y),f=l.pointLocation({x:(b.x+d.x)/2,y:(b.y+d.y)/2});return q=q+r-Math.log(e)/Math.LN2,c(),l.center(f)},l.angle=function(a){return arguments.length?(u=a,v=Math.cos(u),w=Math.sin(u),x=Math.cos(-u),y=Math.sin(-u),g(),l.dispatch({type:"move"}),l):u},l.add=function(a){return a.map(l),l},l.remove=function(a){return a.map(null),l},l.dispatch=a.dispatch(l),l},d.maps=[],d.add=function(a){for(var b=0;b<d.maps.length;b++)if(d.maps[b]==a)return;d.maps.push(a)},d.remove=function(a){for(var b=0;b<d.maps.length;b++)if(d.maps[b]==a)return void d.maps.splice(b,1)},window.addEventListener&&(window.addEventListener("resize",d,!1),window.addEventListener("load",d,!1)),a.map.locationCoordinate=function(a){var b=1/360;return{column:(a.lon+180)*b,row:(180-f(a.lat))*b,zoom:0}},a.map.coordinateLocation=function(a){var b=45/Math.pow(2,a.zoom-3);return{lon:b*a.column-180,lat:e(180-b*a.row)}};var k=/WebKit/.test(navigator.userAgent)?-1:0;a.layer=function(b,c){function d(a){for(var b=t[0].nextSibling;a>n;n++){s.insertBefore(t[-4],b),s.insertBefore(t[2],b),s.insertBefore(t[1],b);for(var c=t[-4],d=-4;2>d;)t[d]=t[++d];t[d]=c}}function e(a){for(var b=t[0].nextSibling;n>a;n--){s.insertBefore(t[-1],b),s.insertBefore(t[2],t[-4]);for(var c=t[2],d=2;d>-4;)t[d]=t[--d];t[d]=c}}function f(){function b(b){var c=b.zoom,d=0>c?1:1<<c,e=b.column%d,f=b.row;return 0>e&&(e+=d),{locationPoint:function(b){var d=a.map.locationCoordinate(b),g=Math.pow(2,c-d.zoom);return{x:v.x*(g*d.column-e),y:v.y*(g*d.row-f)}}}}function c(a,c,d){for(var e=z.zoom,f=2-D,g=4+D,h=a;c>h;h++){var i=p.load({column:h,row:d,zoom:e},b);if(!(i.ready||i.key in G)){i.proxyRefs={};for(var j,k,l,m=1;f>=m;m++){k=!0;for(var n=0,o=1<<m;o>=n;n++)for(var q=0;o>=q;q++)l=p.peek(j={column:(h<<m)+q,row:(d<<m)+n,zoom:e+m}),l&&l.ready?(G[l.key]=p.load(j),l.proxyCount++,i.proxyRefs[l.key]=l):k=!1;if(k)break}if(!k)for(var m=1;g>=m;m++)if(l=p.peek(j={column:h>>m,row:d>>m,zoom:e-m}),l&&l.ready){G[l.key]=p.load(j),l.proxyCount++,i.proxyRefs[l.key]=l;break}}G[i.key]=i}}var f=o.map(),g=f.zoom(),k=g-(g=Math.round(g)),l=f.size(),u=f.angle(),v=f.tileSize(),w=f.locationCoordinate(f.center());if(n!=g){g>n?d(g):n>g?e(g):n=g;for(var x=-4;2>=x;x++){var y=t[x];y.setAttribute("class","zoom"+(0>x?"":"+")+x+" zoom"+(g+x)),y.setAttribute("transform","scale("+Math.pow(2,-x)+")")}}s.setAttribute("transform","translate("+l.x/2+","+l.y/2+")"+(u?"rotate("+u/Math.PI*180+")":"")+(k?"scale("+Math.pow(2,k)+")":"")+(m?m.zoomFraction(k):""));var z=f.pointCoordinate(w,j),A=f.pointCoordinate(w,{x:l.x,y:0}),B=f.pointCoordinate(w,l),C=f.pointCoordinate(w,{x:0,y:l.y});k||u||m||(w.column=(Math.round(v.x*w.column)+(1&l.x)/2)/v.x,w.row=(Math.round(v.y*w.row)+(1&l.y)/2)/v.y),m&&(z=m.unapply(z),A=m.unapply(A),B=m.unapply(B),C=m.unapply(C),w=m.unapply(w));var D=h?h(z.zoom)-z.zoom:0;if(D){var E=Math.pow(2,D);z.column*=E,z.row*=E,A.column*=E,A.row*=E,B.column*=E,B.row*=E,C.column*=E,C.row*=E,z.zoom=A.zoom=B.zoom=C.zoom+=D}var F=p.locks(),G={};for(var H in F)F[H].proxyCount=0;if(r&&D>-5&&3>D){var I=z.zoom<0?1:1<<z.zoom;if(q)i(z,A,B,0,I,c),i(B,C,z,0,I,c);else{var J=Math.floor((z.column+B.column)/2),K=Math.max(0,Math.min(I-1,Math.floor((A.row+C.row)/2))),x=Math.min(4,z.zoom);J=J>>x<<x,K=K>>x<<x,c(J,J+1,K)}}for(var H in G){var L=G[H],E=Math.pow(2,L.level=L.zoom-w.zoom);L.element.setAttribute("transform","translate("+(L.x=v.x*(L.column-w.column*E))+","+(L.y=v.y*(L.row-w.row*E))+")")}for(var H in F)if(!(H in G)){var L=p.unload(H);L.element.parentNode.removeChild(L.element),delete L.proxyRefs}for(var H in G){var L=G[H];L.element.parentNode!=t[L.level]&&(t[L.level].appendChild(L.element),o.show&&o.show(L))}p.flush(),o.dispatch({type:"move"})}function g(a){if(a.tile.proxyRefs){for(var b in a.tile.proxyRefs){var c=a.tile.proxyRefs[b];--c.proxyCount<=0&&p.unload(b)&&c.element.parentNode.removeChild(c.element)}delete a.tile.proxyRefs}}var h,k,l,m,n,o={},p=o.cache=a.cache(b,c).size(512),q=!0,r=!0,s=a.svg("g"),t={};s.setAttribute("class","layer");for(var u=-4;-1>=u;u++)t[u]=s.appendChild(a.svg("g"));for(var u=2;u>=1;u--)t[u]=s.appendChild(a.svg("g"));return t[0]=s.appendChild(a.svg("g")),o.map=function(a){if(!arguments.length)return l;if(l){if(l==a)return s.parentNode.appendChild(s),o;l.off("move",f).off("resize",f),s.parentNode.removeChild(s)}return l=a,l&&(l.container().appendChild(s),o.init&&o.init(s),l.on("move",f).on("resize",f),f()),o},o.container=function(){return s},o.levels=function(){return t},o.id=function(a){return arguments.length?(k=a,s.setAttribute("id",a),o):k},o.visible=function(a){return arguments.length?((r=a)?s.removeAttribute("visibility"):s.setAttribute("visibility","hidden"),l&&f(),o):r},o.transform=function(a){return arguments.length?(m=a,l&&f(),o):m},o.zoom=function(a){return arguments.length?(h="function"==typeof a||null==a?a:function(){return a},l&&f(),o):h},o.tile=function(a){return arguments.length?(q=a,l&&f(),o):q},o.reload=function(){return p.clear(),l&&f(),o},o.dispatch=a.dispatch(o),o.on("load",g),o},a.image=function(){function b(b){var c=b.element=a.svg("image"),f=e.map().tileSize();if(c.setAttribute("preserveAspectRatio","none"),c.setAttribute("width",f.x),c.setAttribute("height",f.y),"function"==typeof d){c.setAttribute("opacity",0);var g=d(b);null!=g?b.request=a.queue.image(c,g,function(a){delete b.request,b.ready=!0,b.img=a,c.removeAttribute("opacity"),e.dispatch({type:"load",tile:b})}):(b.ready=!0,e.dispatch({type:"load",tile:b}))}else b.ready=!0,null!=d&&c.setAttributeNS(a.ns.xlink,"href",d),e.dispatch({type:"load",tile:b})}function c(a){a.request&&a.request.abort(!0)}var d,e=a.layer(b,c);return e.url=function(b){return arguments.length?(d="string"==typeof b&&/{.}/.test(b)?a.url(b):b,e.reload()):d},e},a.geoJson=function(b){function c(a){var b={lat:0,lon:0};return function(c){b.lat=c[1],b.lon=c[0];var d=a(b);return c.x=d.x,c.y=d.y,d}}function d(a,b){return a&&a.type in t&&t[a.type](a,b)}function e(a,b,c){return a.type in u&&u[a.type](a,b,c)}function f(e,f){function g(a){var c=[];switch(a.next&&(e.request=b(a.next.href,g)),a.type){case"FeatureCollection":for(var i=0;i<a.features.length;i++){var j=a.features[i],l=d(j.geometry,f);l&&c.push({element:h.appendChild(l),data:j})}break;case"Feature":var l=d(a.geometry,f);l&&c.push({element:h.appendChild(l),data:a});break;default:var l=d(a,f);l&&c.push({element:h.appendChild(l),data:{type:"Feature",geometry:a}})}e.ready=!0,c.push.apply(e.features,c),k.dispatch({type:"load",tile:e,features:c})}var h=e.element=a.svg("g");e.features=[],f=c(f(e).locationPoint),null!=i?e.request=b("function"==typeof i?i(e):i,g):g({type:"FeatureCollection",features:j||[]})}function g(a){a.request&&a.request.abort(!0)}function h(){var a,b,c,d,f,g,h,i=k.map().zoom(),j=k.cache.locks();if("fixed"==s){for(a in j)if((b=j[a]).scale!=i){for(h="scale("+Math.pow(2,b.zoom-i)+")",d=-1,f=(c=b.features).length;++d<f;)e((g=c[d]).data.geometry,g.element,h);b.scale=i}}else for(a in j){for(d=-1,f=(c=(b=j[a]).features).length;++d<f;)e((g=c[d]).data.geometry,g.element,"");delete b.scale}}var i,j,k=a.layer(f,g),l=k.container(),m=!0,n="org.polymaps."+a.id(),o="url(#"+n+")",q=l.insertBefore(a.svg("clipPath"),l.firstChild),r=q.appendChild(a.svg("rect")),s="auto";l.setAttribute("fill-rule","evenodd"),q.setAttribute("id",n),arguments.length||(b=a.queue.json);var t={Point:function(b,c){var d=c(b.coordinates),e=a.svg("circle");return e.setAttribute("r",4.5),e.setAttribute("transform","translate("+d.x+","+d.y+")"),e},MultiPoint:function(b,c){for(var d,e,f=a.svg("g"),g=b.coordinates,h=-1,i=g.length;++h<i;)e=f.appendChild(a.svg("circle")),e.setAttribute("r",4.5),e.setAttribute("transform","translate("+(d=c(g[h])).x+","+d.y+")");return f},LineString:function(b,c){for(var d,e=a.svg("path"),f=["M"],g=b.coordinates,h=-1,i=g.length;++h<i;)f.push((d=c(g[h])).x,",",d.y,"L");return f.pop(),f.length?(e.setAttribute("d",f.join("")),e):void 0},MultiLineString:function(b,c){for(var d,e,f,g=a.svg("path"),h=[],i=b.coordinates,j=-1,k=i.length;++j<k;){for(d=i[j],e=-1,f=d.length,h.push("M");++e<f;)h.push((p=c(d[e])).x,",",p.y,"L");h.pop()}return h.length?(g.setAttribute("d",h.join("")),g):void 0},Polygon:function(b,c){for(var d,e,f,g=a.svg("path"),h=[],i=b.coordinates,j=-1,k=i.length;++j<k;){for(d=i[j],e=-1,f=d.length-1,h.push("M");++e<f;)h.push((p=c(d[e])).x,",",p.y,"L");h[h.length-1]="Z"}return h.length?(g.setAttribute("d",h.join("")),g):void 0},MultiPolygon:function(b,c){for(var d,e,f,g,h,i,j=a.svg("path"),k=[],l=b.coordinates,m=-1,n=l.length;++m<n;)for(d=l[m],f=-1,h=d.length;++f<h;){for(e=d[f],g=-1,i=e.length-1,k.push("M");++g<i;)k.push((p=c(e[g])).x,",",p.y,"L");k[k.length-1]="Z"}return k.length?(j.setAttribute("d",k.join("")),j):void 0},GeometryCollection:function(b,c){for(var e,f=a.svg("g"),g=-1,h=b.geometries,i=h.length;++g<i;)e=d(h[g],c),e&&f.appendChild(e);return f}},u={Point:function(a,b,c){var d=a.coordinates;b.setAttribute("transform","translate("+d.x+","+d.y+")"+c)},MultiPoint:function(a,b,c){for(var d,e=a.coordinates,f=-1,g=d.length,h=b.firstChild;++f<g;)d=e[f],h.setAttribute("transform","translate("+d.x+","+d.y+")"+c),h=h.nextSibling}};k.url=function(b){return arguments.length?(i="string"==typeof b&&/{.}/.test(b)?a.url(b):b,null!=i&&(j=null),"string"==typeof i&&k.tile(!1),k.reload()):i},k.features=function(a){return arguments.length?((j=a)&&(i=null,k.tile(!1)),k.reload()):j},k.clip=function(a){if(!arguments.length)return m;m&&l.removeChild(q),(m=a)&&l.insertBefore(q,l.firstChild);
var b=k.cache.locks();for(var c in b)m?b[c].element.setAttribute("clip-path",o):b[c].element.removeAttribute("clip-path");return k};var v=k.tile;k.tile=function(a){return arguments.length&&!a&&k.clip(a),v.apply(k,arguments)};var w=k.map;return k.map=function(a){if(a&&r){var b=a.tileSize();r.setAttribute("width",b.x),r.setAttribute("height",b.y)}return w.apply(k,arguments)},k.scale=function(a){return arguments.length?((s=a)?k.on("move",h):k.off("move",h),k.map()&&h(),k):s},k.show=function(a){return m?a.element.setAttribute("clip-path",o):a.element.removeAttribute("clip-path"),k.dispatch({type:"show",tile:a,features:a.features}),k},k.reshow=function(){var a=k.cache.locks();for(var b in a)k.show(a[b]);return k},k},a.dblclick=function(){function a(a){var c=b.zoom();c=a.shiftKey?Math.ceil(c)-c-1:1-c+Math.floor(c),"mouse"===e?b.zoomBy(c,b.mouse(a)):b.zoomBy(c)}var b,c,d={},e="mouse";return d.zoom=function(a){return arguments.length?(e=a,d):e},d.map=function(e){return arguments.length?(b&&(c.removeEventListener("dblclick",a,!1),c=null),(b=e)&&(c=b.container(),c.addEventListener("dblclick",a,!1)),d):b},d},a.drag=function(){function a(a){a.shiftKey||(f={x:a.clientX,y:a.clientY},d.focusableParent().focus(),a.preventDefault(),document.body.style.setProperty("cursor","move",null))}function b(a){f&&(d.panBy({x:a.clientX-f.x,y:a.clientY-f.y}),f.x=a.clientX,f.y=a.clientY)}function c(a){f&&(b(a),f=null,document.body.style.removeProperty("cursor"))}var d,e,f,g={};return g.map=function(b){return arguments.length?(d&&(e.removeEventListener("mousedown",a,!1),e=null),(d=b)&&(e=d.container(),e.addEventListener("mousedown",a,!1)),g):d},window.addEventListener("mousemove",b,!1),window.addEventListener("mouseup",c,!1),g},a.wheel=function(){function a(){c=null}function b(b){var e,f=b.wheelDelta||-b.detail;if(f)if(h){try{k.scrollTop=1e3,k.dispatchEvent(b),f=1e3-k.scrollTop}catch(j){}f*=.005}else{var l=Date.now();l-g>200?(f=f>0?1:-1,g=l):f=0}if(f)switch(i){case"mouse":e=d.mouse(b),c||(c=d.pointLocation(e)),d.off("move",a).zoomBy(f,e,c).on("move",a);break;case"location":d.zoomBy(f,d.locationPoint(c),c);break;default:d.zoomBy(f)}return b.preventDefault(),!1}var c,d,e,f={},g=0,h=!0,i="mouse",j=document.createElement("div"),k=document.createElement("div");return k.style.visibility="hidden",k.style.top="0px",k.style.height="0px",k.style.width="0px",k.style.overflowY="scroll",j.style.height="2000px",k.appendChild(j),document.body.appendChild(k),f.smooth=function(a){return arguments.length?(h=a,f):h},f.zoom=function(b,e){return arguments.length?(i=b,c=e,d&&("mouse"==i?d.on("move",a):d.off("move",a)),f):i},f.map=function(c){return arguments.length?(d&&(e.removeEventListener("mousemove",a,!1),e.removeEventListener("mousewheel",b,!1),e.removeEventListener("MozMousePixelScroll",b,!1),e=null,d.off("move",a)),(d=c)&&("mouse"==i&&d.on("move",a),e=d.container(),e.addEventListener("mousemove",a,!1),e.addEventListener("mousewheel",b,!1),e.addEventListener("MozMousePixelScroll",b,!1)),f):d},f},a.arrow=function(){function a(a){if(!(a.ctrlKey||a.altKey||a.metaKey)){var b=Date.now(),c=0,g=0;switch(a.keyCode){case 37:i.left||(j=b,i.left=1,i.right||(c=m));break;case 39:i.right||(j=b,i.right=1,i.left||(c=-m));break;case 38:i.up||(j=b,i.up=1,i.down||(g=m));break;case 40:i.down||(j=b,i.down=1,i.up||(g=-m));break;default:return}(c||g)&&f.panBy({x:c,y:g}),!e&&i.left|i.right|i.up|i.down&&(e=setInterval(d,l)),a.preventDefault()}}function b(a){switch(j=Date.now(),a.keyCode){case 37:i.left=0;break;case 39:i.right=0;break;case 38:i.up=0;break;case 40:i.down=0;break;default:return}!e||i.left|i.right|i.up|i.down||(e=clearInterval(e)),a.preventDefault()}function c(a){switch(a.charCode){case 45:case 95:f.zoom(Math.ceil(f.zoom())-1);break;case 43:case 61:f.zoom(Math.floor(f.zoom())+1);break;default:return}a.preventDefault()}function d(){if(f&&!(Date.now()<j+k)){var a=(i.left-i.right)*m,b=(i.up-i.down)*m;(a||b)&&f.panBy({x:a,y:b})}}var e,f,g,h={},i={left:0,right:0,up:0,down:0},j=0,k=250,l=50,m=16;return h.map=function(d){return arguments.length?(f&&(g.removeEventListener("keypress",c,!1),g.removeEventListener("keydown",a,!1),g.removeEventListener("keyup",b,!1),g=null),(f=d)&&(g=f.focusableParent(),g.addEventListener("keypress",c,!1),g.addEventListener("keydown",a,!1),g.addEventListener("keyup",b,!1)),h):f},h.speed=function(a){return arguments.length?(m=a,h):m},h},a.hash=function(){function a(){var a=h(d);c!==a&&location.replace(c=a)}function b(){location.hash!==c&&g(d,(c=location.hash).substring(1))&&a()}var c,d,e={},f=90-1e-8,g=function(a,b){var c=b.split("/").map(Number);if(c.length<3||c.some(isNaN))return!0;var d=a.size();a.zoomBy(c[0]-a.zoom(),{x:d.x/2,y:d.y/2},{lat:Math.min(f,Math.max(-f,c[1])),lon:c[2]})},h=function(a){var b=a.center(),c=a.zoom(),d=Math.max(0,Math.ceil(Math.log(c)/Math.LN2));return"#"+c.toFixed(2)+"/"+b.lat.toFixed(d)+"/"+b.lon.toFixed(d)};return e.map=function(c){return arguments.length?(d&&(d.off("move",a),window.removeEventListener("hashchange",b,!1)),(d=c)&&(d.on("move",a),window.addEventListener("hashchange",b,!1),location.hash?b():a()),e):d},e.parser=function(a){return arguments.length?(g=a,e):g},e.formatter=function(a){return arguments.length?(h=a,e):h},e},a.touch=function(){function b(a){var b=-1,c=a.touches.length,e=Date.now();if(1==c&&300>e-j){var h=d.zoom();d.zoomBy(1-h+Math.floor(h),d.mouse(a.touches[0])),a.preventDefault()}for(j=e,f=d.zoom(),g=d.angle();++b<c;)e=a.touches[b],k[e.identifier]=d.pointLocation(d.mouse(e))}function c(b){switch(b.touches.length){case 1:var c=b.touches[0];d.zoomBy(0,d.mouse(c),k[c.identifier]),b.preventDefault();break;case 2:var c=b.touches[0],e=b.touches[1],h=d.mouse(c),j=d.mouse(e),l={x:(h.x+j.x)/2,y:(h.y+j.y)/2},m=a.map.locationCoordinate(k[c.identifier]),n=a.map.locationCoordinate(k[e.identifier]),o={row:(m.row+n.row)/2,column:(m.column+n.column)/2,zoom:0},p=a.map.coordinateLocation(o);d.zoomBy(Math.log(b.scale)/Math.LN2+f-d.zoom(),l,p),i&&d.angle(b.rotation/180*Math.PI+g),b.preventDefault()}}var d,e,f,g,h={},i=!1,j=0,k={};return window.addEventListener("touchmove",c,!1),h.rotate=function(a){return arguments.length?(i=a,h):i},h.map=function(a){return arguments.length?(d&&(e.removeEventListener("touchstart",b,!1),e=null),(d=a)&&(e=d.container(),e.addEventListener("touchstart",b,!1)),h):d},h},a.interact=function(){var b={},c=a.drag(),d=a.wheel(),e=a.dblclick(),f=a.touch(),g=a.arrow();return b.map=function(a){return c.map(a),d.map(a),e.map(a),f.map(a),g.map(a),b},b},a.compass=function(){function b(a){return A.setAttribute("class","compass active"),s||(s=setInterval(c,G)),t&&w.panBy(t),E=Date.now(),l(a)}function c(){t&&Date.now()>E+F&&w.panBy(t)}function d(a){return a.shiftKey?(v={x0:w.mouse(a)},w.focusableParent().focus(),l(a)):void 0}function e(a){v&&(v.x1=w.mouse(a),K.setAttribute("x",Math.min(v.x0.x,v.x1.x)),K.setAttribute("y",Math.min(v.x0.y,v.x1.y)),K.setAttribute("width",Math.abs(v.x0.x-v.x1.x)),K.setAttribute("height",Math.abs(v.x0.y-v.x1.y)),K.removeAttribute("display"))}function f(){A.setAttribute("class","compass"),v&&(v.x1&&(w.extent([w.pointLocation({x:Math.min(v.x0.x,v.x1.x),y:Math.max(v.x0.y,v.x1.y)}),w.pointLocation({x:Math.max(v.x0.x,v.x1.x),y:Math.min(v.x0.y,v.x1.y)})]),K.setAttribute("display","none")),v=null),s&&(clearInterval(s),s=0)}function g(a){return function(){a?this.setAttribute("class","active"):this.removeAttribute("class"),t=a}}function h(a){return function(b){A.setAttribute("class","compass active");var c=w.zoom();return w.zoom(0>a?Math.ceil(c)-1:Math.floor(c)+1),l(b)}}function i(a){return function(b){return w.zoom(a),l(b)}}function j(){this.setAttribute("class","active")}function k(){this.removeAttribute("class")}function l(a){return a.stopPropagation(),a.preventDefault(),!1}function m(c){var d=Math.SQRT1_2*C,e=.7*C,f=.2*C,h=a.svg("g"),i=h.appendChild(a.svg("path")),j=h.appendChild(a.svg("path"));return i.setAttribute("class","direction"),i.setAttribute("pointer-events","all"),i.setAttribute("d","M0,0L"+d+","+d+"A"+C+","+C+" 0 0,1 "+-d+","+d+"Z"),j.setAttribute("class","chevron"),j.setAttribute("d","M"+f+","+(e-f)+"L0,"+e+" "+-f+","+(e-f)),j.setAttribute("pointer-events","none"),h.addEventListener("mousedown",b,!1),h.addEventListener("mouseover",g(c),!1),h.addEventListener("mouseout",g(null),!1),h.addEventListener("dblclick",l,!1),h}function n(b){var c=.4*C,d=c/2,e=a.svg("g"),f=e.appendChild(a.svg("path")),g=e.appendChild(a.svg("path")),i=e.appendChild(a.svg("path")),m=e.appendChild(a.svg("path"));return f.setAttribute("class","back"),f.setAttribute("d","M"+-c+",0V"+-c+"A"+c+","+c+" 0 1,1 "+c+","+-c+"V0Z"),g.setAttribute("class","direction"),g.setAttribute("d",f.getAttribute("d")),i.setAttribute("class","chevron"),i.setAttribute("d","M"+-d+","+-c+"H"+d+(b>0?"M0,"+(-c-d)+"V"+-d:"")),m.setAttribute("class","fore"),m.setAttribute("fill","none"),m.setAttribute("d",f.getAttribute("d")),e.addEventListener("mousedown",h(b),!1),e.addEventListener("mouseover",j,!1),e.addEventListener("mouseout",k,!1),e.addEventListener("dblclick",l,!1),e}function o(b){var c=.2*C,d=.4*C,e=a.svg("g"),f=e.appendChild(a.svg("rect")),g=e.appendChild(a.svg("path"));return f.setAttribute("pointer-events","all"),f.setAttribute("fill","none"),f.setAttribute("x",-d),f.setAttribute("y",-.75*d),f.setAttribute("width",2*d),f.setAttribute("height",1.5*d),g.setAttribute("class","chevron"),g.setAttribute("d","M"+-c+",0H"+c),e.addEventListener("mousedown",i(b),!1),e.addEventListener("dblclick",l,!1),e}function p(){var a=C+6,b=a,c=w.size();switch(H){case"top-left":break;case"top-right":a=c.x-a;break;case"bottom-left":b=c.y-b;break;case"bottom-right":a=c.x-a,b=c.y-b}A.setAttribute("transform","translate("+a+","+b+")"),K.setAttribute("transform","translate("+-a+","+-b+")");for(var d in B)d==w.zoom()?B[d].setAttribute("class","active"):B[d].removeAttribute("class")}function q(){for(;A.lastChild;)A.removeChild(A.lastChild);if(A.appendChild(K),"none"!=J){u=A.appendChild(a.svg("g")),u.setAttribute("class","pan");var b=u.appendChild(a.svg("circle"));b.setAttribute("class","back"),b.setAttribute("r",C);var c=u.appendChild(m({x:0,y:-D}));c.setAttribute("transform","rotate(0)");var d=u.appendChild(m({x:D,y:0}));d.setAttribute("transform","rotate(90)");var e=u.appendChild(m({x:0,y:D}));e.setAttribute("transform","rotate(180)");var f=u.appendChild(m({x:-D,y:0}));f.setAttribute("transform","rotate(270)");var g=u.appendChild(a.svg("circle"));g.setAttribute("fill","none"),g.setAttribute("class","fore"),g.setAttribute("r",C)}else u=null;if("none"!=I){r=A.appendChild(a.svg("g")),r.setAttribute("class","zoom");var h=-.5;if("big"==I){B={};for(var i=w.zoomRange()[0],h=0;i<=w.zoomRange()[1];i++,h++)(B[i]=r.appendChild(o(i))).setAttribute("transform","translate(0,"+-(h+.75)*C*.4+")")}var j="none"==J?.4:2;r.setAttribute("transform","translate(0,"+C*(/^top-/.test(H)?j+.4*(h+.5):-j)+")"),r.appendChild(n(1)).setAttribute("transform","translate(0,"+-(h+.5)*C*.4+")"),r.appendChild(n(-1)).setAttribute("transform","scale(-1)")}else r=null;p()}var r,s,t,u,v,w,x,y,z={},A=a.svg("g"),B={},C=30,D=16,E=0,F=250,G=50,H="top-left",I="small",J="small",K=a.svg("rect");return A.setAttribute("class","compass"),K.setAttribute("class","back fore"),K.setAttribute("pointer-events","none"),K.setAttribute("display","none"),z.radius=function(a){return arguments.length?(C=a,w&&q(),z):C},z.speed=function(a){return arguments.length?(D=a,z):C},z.position=function(a){return arguments.length?(H=a,w&&q(),z):H},z.pan=function(a){return arguments.length?(J=a,w&&q(),z):J},z.zoom=function(a){return arguments.length?(I=a,w&&q(),z):I},z.map=function(a){return arguments.length?(w&&(x.removeEventListener("mousedown",d,!1),x.removeChild(A),x=null,y.removeEventListener("mousemove",e,!1),y.removeEventListener("mouseup",f,!1),y=null,w.off("move",p).off("resize",p)),(w=a)&&(x=w.container(),x.appendChild(A),x.addEventListener("mousedown",d,!1),y=x.ownerDocument.defaultView,y.addEventListener("mousemove",e,!1),y.addEventListener("mouseup",f,!1),w.on("move",p).on("resize",p),q()),z):w},z},a.grid=function(){function b(){var b=e.firstChild,d=c.size(),f=c.pointLocation(j),g=(c.pointLocation(d),Math.pow(2,4-Math.round(c.zoom())));f.lat=Math.floor(f.lat/g)*g,f.lon=Math.ceil(f.lon/g)*g;for(var h;(h=c.locationPoint(f).x)<=d.x;f.lon+=g)b||(b=e.appendChild(a.svg("line"))),b.setAttribute("x1",h),b.setAttribute("x2",h),b.setAttribute("y1",0),b.setAttribute("y2",d.y),b=b.nextSibling;for(var i;(i=c.locationPoint(f).y)<=d.y;f.lat-=g)b||(b=e.appendChild(a.svg("line"))),b.setAttribute("y1",i),b.setAttribute("y2",i),b.setAttribute("x1",0),b.setAttribute("x2",d.x),b=b.nextSibling;for(;b;){var k=b.nextSibling;e.removeChild(b),b=k}}var c,d={},e=a.svg("g");return e.setAttribute("class","grid"),d.map=function(a){return arguments.length?(c&&(e.parentNode.removeChild(e),c.off("move",b).off("resize",b)),(c=a)&&(c.on("move",b).on("resize",b),c.container().appendChild(e),c.dispatch({type:"move"})),d):c},d},a.stylist=function(){function b(b){var c,g,h,i,j,k,l,m=b.features.length,n=e.length,o=f.length;for(k=0;m>k;++k)if(h=(c=b.features[k]).element){for(g=c.data,l=0;n>l;++l)j=(i=e[l]).value,"function"==typeof j&&(j=j.call(null,g)),null==j?i.name.local?h.removeAttributeNS(i.name.space,i.name.local):h.removeAttribute(i.name):i.name.local?h.setAttributeNS(i.name.space,i.name.local,j):h.setAttribute(i.name,j);for(l=0;o>l;++l)j=(i=f[l]).value,"function"==typeof j&&(j=j.call(null,g)),null==j?h.style.removeProperty(i.name):h.style.setProperty(i.name,j,i.priority);if(j=d){for("function"==typeof j&&(j=j.call(null,g));h.lastChild;)h.removeChild(h.lastChild);null!=j&&h.appendChild(a.svg("title")).appendChild(document.createTextNode(j))}}}var d,e=[],f=[];return b.attr=function(a,d){return e.push({name:c(a),value:d}),b},b.style=function(a,c,d){return f.push({name:a,value:c,priority:arguments.length<3?null:d}),b},b.title=function(a){return d=a,b},b}}(org.polymaps),$(document).on("ready",function(){function a(a){var b=new RegExp("=== "+a.toUpperCase()+" ===\\s*([\\s\\S]+?)\\s+==="),d=c.match(b),e=d[1],f=$("<code>").addClass("lang-"+a+"]").text(e);$("#code-example code").replaceWith(f),$("#examples a").removeClass("active"),$("#examples a[data-lang="+a+"]").addClass("active"),$("pre code").each(function(a,b){hljs.highlightBlock(b)})}var b=$("#examples"),c="";b.length&&($("#examples-header li a").on("click",function(b){b.preventDefault();var c=$(this).data("lang");a(c)}),$.ajax({url:"/examples_raw_code.txt",dataType:"text",success:function(b){c=b,a("curl")}}))});var check=document.getElementById("leaflet-map");if(null!==check){var map=L.map("leaflet-map").setView([51.52255,-.10249],13),options={key:"86bd6a1655f63ba3d04039df42a8d4aa",limit:10},geocoder=L.Control.OpenCageSearch.geocoder(options),control=L.Control.openCageSearch(options).addTo(map),marker;L.tileLayer("http://otile1.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors | Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest</a>'}).addTo(map),map.on("click",function(a){var b=a.latlng.lat.toString()+","+a.latlng.lng.toString();geocoder.geocode(b,function(a){var b=a[0];b&&(marker?marker.setLatLng(b.center).setPopupContent(b.name).openPopup():marker=L.marker(b.center).bindPopup(b.name).addTo(map).openPopup())})})}